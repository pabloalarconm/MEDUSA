#!/bin/bash

# Regenerate Python Builders:
cd ../../CDE-semantic-model-implementations/YARRRML_Transform_Templates/Builders_scripts_python/
ls
# python3 builder_pseudonym.py > ../../../MEDUSA/trialCDE/config/pseudonym_yarrrml_template.yaml
# python3 builder_personal_information.py > ../../../MEDUSA/trialCDE/config/personal_information_yarrrml_template.yaml
# python3 builder_patient_status.py > ../../../MEDUSA/trialCDE/config/patient_status_yarrrml_template.yaml
# python3 builder_care_pathway.py > ../../../MEDUSA/trialCDE/config/care_pathway_yarrrml_template.yaml
# python3 builder_disease_history.py > ../../../MEDUSA/trialCDE/config/disease_history_yarrrml_template.yaml
# python3 builder_diagnosis.py > ../../../MEDUSA/trialCDE/config/diagnosis_yarrrml_template.yaml
# python3 builder_genetic_diagnosis.py > ../../../MEDUSA/trialCDE/config/genetic_diagnosis_yarrrml_template.yaml
# python3 builder_phenotyping.py > ../../../MEDUSA/trialCDE/config/phenotyping_yarrrml_template.yaml
# python3 builder_undiagnosed.py > ../../../MEDUSA/trialCDE/config/undiagnosed_yarrrml_template.yaml
# python3 builder_consent.py > ../../../MEDUSA/trialCDE/config/patient_consent_yarrrml_template.yaml
# python3 builder_biobank.py > ../../../MEDUSA/trialCDE/config/biobank_yarrrml_template.yaml
# python3 builder_disability.py > ../../../MEDUSA/trialCDE/config/disability_yarrrml_template.yaml

# python3 builder_lab_measurement.py > ../../../MEDUSA/trialCDE/config/lab_measurement_yarrrml_template.yaml
python3 builder_drug_treatment.py > ../../../MEDUSA/trialCDE/config/drug_treatment_yarrrml_template.yaml


# python3 builder_personal_information_biolink.py > ../../../MEDUSA/trialCDE/config/personal_information_biolink_all_yarrrml_template.yaml
# python3 builder_personal_information_biolink.py > ../../../MEDUSA/trialCDE/config/personal_information_biolink_one_yarrrml_template.yaml
# python3 builder_lab_measurement_biolink.py > ../../../MEDUSA/trialCDE/config/lab_measurement_biolink_all_yarrrml_template.yaml
# python3 builder_lab_measurement_biolink.py > ../../../MEDUSA/trialCDE/config/lab_measurement_biolink_one_yarrrml_template.yaml
# python3 builder_lab_measurement_biolink.py > ../../../MEDUSA/trialCDE/config/lab_measurement_biolink_2_all_yarrrml_template.yaml
# python3 builder_lab_measurement_biolink.py > ../../../MEDUSA/trialCDE/config/lab_measurement_biolink_2_one_yarrrml_template.yaml



cd ../../../MEDUSA/trialCDE

# Uniqid generatior:
sudo python3 uniq.py ${PWD}/data # In case of regenerate a new uniqid

# Run YARRRML serializer:
# irb run_me_to_test.rb personal_information
# irb run_me_to_test.rb patient_status
# irb run_me_to_test.rb care_pathway
# irb run_me_to_test.rb diagnosis
# irb run_me_to_test.rb disease_history
# irb run_me_to_test.rb genetic_diagnosis
# irb run_me_to_test.rb phenotyping
# irb run_me_to_test.rb undiagnosed
# irb run_me_to_test.rb patient_consent
# irb run_me_to_test.rb disability
# irb run_me_to_test.rb lab_measurement
irb run_me_to_test.rb drug_treatment

# irb run_me_to_test.rb personal_information_biolink_all
# irb run_me_to_test.rb personal_information_biolink_one
# irb run_me_to_test.rb lab_measurement_biolink_all
# irb run_me_to_test.rb lab_measurement_biolink_one
# irb run_me_to_test.rb lab_measurement_biolink_2_all 
# irb run_me_to_test.rb lab_measurement_biolink_2_one 

# From NT to TTL
sudo python3 nt2ttl.py ${PWD}/data/triples

# Give permisions
sudo chmod -R 777 .